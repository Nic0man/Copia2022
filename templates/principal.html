<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Principal</title>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <link rel="stylesheet" href="https://adminlte.io/themes/v3/plugins/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="https://adminlte.io/themes/v3/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
    <link rel="stylesheet" href="https://adminlte.io/themes/v3/plugins/icheck-bootstrap/icheck-bootstrap.min.css">
    <link rel="stylesheet" href="https://adminlte.io/themes/v3/plugins/jqvmap/jqvmap.min.css">
    <link rel="stylesheet" href="https://adminlte.io/themes/v3/dist/css/adminlte.min.css">
    <link rel="stylesheet" href="https://adminlte.io/themes/v3/plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
    <link rel="stylesheet" href="https://adminlte.io/themes/v3/plugins/daterangepicker/daterangepicker.css">
    <link rel="stylesheet" href="https://adminlte.io/themes/v3/plugins/summernote/summernote-bs4.min.css">
    <style>
      .container, .container-fluid, .container-lg, .container-md, .container-sm, .container-xl {
        padding: 4%;
      }
      .alert-info {
        color: #ffffff;
        background-color: #2E4053;
        border-color: #bee5eb;
        font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        
      }
      .btn-dark {
        color: #fff;
        background-color: #48C9B0;
        border-color: #48C9B0;
        box-shadow: none;
        border-radius: 100px;
      }
      .nav-pills .nav-link.active, .nav-pills .show>.nav-link {
        color: #fff;
        background-color: #48C9B0;
        border-radius: 100px;
      }
      .btn-danger {
        color: #fff;
        background-color: #AB7B85;
        border-color: #AB7B85;
        box-shadow: none;
      }
    </style>
  </head>
  <body class="body hold-transition sidebar-mini layout-fixed">
    <div class="wrapper">
      <!-- Preloader -->
      <div class="preloader flex-column justify-content-center align-items-center">
        <img class="animation__shake" src="https://adminlte.io/themes/v3/dist/img/AdminLTELogo.png" alt="AdminLTELogo" height="60" width="60">
      </div>
      <div class="">
        <section class="content">
          <div class="container-fluid">
            <div class="contariner alert alert-info">
              <h2>EasyKURER</h2>
              </div>
              <div class=" row">
                <div class="col-12">
                  <!-- Custom Tabs -->
                  <div class="card">
                    <div class="card-header d-flex p-0">
                      <ul class="nav nav-pills ml-auto p-2">
                        <li class="nav-item"><a class="nav-link active" href="#tab_1" data-toggle="tab">Gestion de Envio</a></li>
                        <li class="nav-item" onclick="CargaHistorial()"><a class="nav-link" href="#tab_2" data-toggle="tab">Historial</a></li>
                        <li class="nav-item"><a class="nav-link" href="#tab_3" data-toggle="tab">Perfil</a></li>
                        <li class="nav-item"><a href="/login"><button class="btn btn-danger">Regresar</button></a></li>
                      </ul>
                    </div><!-- /.card-header -->
                    <div class="card-body">
                      <div class="tab-content">
                        <div class="tab-pane active" id="tab_1">
                          <form onsubmit = "return enviarMail()">
                            <input placeholder = "Asunto" type="text" class = "form-control" required id = "txtasunto" name = "txtasunto" >
                            <hr>
                              <select required name="sl_destino" id="sl_destino" class = "form-control">
                                <option value="">Seleccione un correo</option>
                                {% for r in data %}
                                <option value="{{r['CorreoUsuario']}}">{{r['NombreUsuario']}}</option>
                                {% endfor %}
                              </select>
                            <hr>
                              <textarea placeholder = "Escriba el mensaje"name="txtmensaje" id="txtmensaje" cols="30" rows="10" class = "form-control" ></textarea>
                            <hr>
                            <center>
                              <button type = "submit" class = "btn-dark">Enviar</button>
                            </center>
                          </form>
                        </div>
                        <!-- /.tab-pane -->
                        <div class="tab-pane" id="tab_2">
                          <div class = "row">
                            <div class = "col-6" id ="enviados" name = "enviados">enviados</div>
                            <div class = "col-6" id ="recibidos" name = "recibidos">recibidos</div>
                          </div>
                        </div>
                        <!-- /.tab-pane -->
                        <div class="tab-pane" id="tab_3">
                          <form onsubmit = "return ActualizarPSW()">
                            <input type = "password" placeholder = "Nueva contraseña" class = "form-control" required id = "txtnewpass1" name = "txtnewpass1">
                            <hr>
                            <input type = "password" placeholder = "Nueva contraseña" class = "form-control" required id = "txtnewpass2" name = "txtnewpass2">
                            <hr>
                            <center><button type = "submit" class = "btn-dark">Actualizar</button></center>
                          </form>
                        </div>
                        <!-- /.tab-pane -->
                      </div>
                      <!-- /.tab-content -->
                    </div><!-- /.card-body -->
                  </div>
                  <!-- ./card -->
                </div>
                <!-- /.col -->
              </div>
            <!-- /.row (main row) -->
          </div><!-- /.container-fluid -->
        </section>
        <!-- /.content -->
      </div>
      <!-- Control Sidebar -->
      <aside class="control-sidebar control-sidebar-dark">
        <!-- Control sidebar content goes here -->
      </aside>
      <!-- /.control-sidebar -->
    </div>
    <!-- ./wrapper -->

    <!-- jQuery -->
    <script src="https://adminlte.io/themes/v3/plugins/jquery/jquery.min.js"></script>
    <script src="https://adminlte.io/themes/v3/plugins/jquery-ui/jquery-ui.min.js"></script>

    <!-- Bootstrap 4 -->
    <script src="https://adminlte.io/themes/v3/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="https://adminlte.io/themes/v3/plugins/chart.js/Chart.min.js"></script>
    <script src="https://adminlte.io/themes/v3/plugins/sparklines/sparkline.js"></script>
    <script src="https://adminlte.io/themes/v3/plugins/jqvmap/jquery.vmap.min.js"></script>
    <script src="https://adminlte.io/themes/v3/plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
    <script src="https://adminlte.io/themes/v3/plugins/jquery-knob/jquery.knob.min.js"></script>
    <script src="https://adminlte.io/themes/v3/plugins/moment/moment.min.js"></script>
    <script src="https://adminlte.io/themes/v3/plugins/daterangepicker/daterangepicker.js"></script>
    <script src="https://adminlte.io/themes/v3/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
    <script src="https://adminlte.io/themes/v3/plugins/summernote/summernote-bs4.min.js"></script>
    <script src="https://adminlte.io/themes/v3/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
    <script src="https://adminlte.io/themes/v3/dist/js/adminlte.js"></script>
    <script src="https://adminlte.io/themes/v3/dist/js/pages/dashboard.js"></script>

    <script>
    function gestionmenus(){
      $("#titulo").html("Gestion de Menus");

      var info="<h1>informacion de menus</h1>"
      +"<br>sdfghjkoifgghiojb "
      +"<br><button class='btn btn-info'>Procesar</button>";

      $("#contenido").html(info);
    }

    function enviarMail(){
      /*alert("prueba de metodo");
      return false;*/

    $.ajax({
      url : "enviarEE",
      data : "asunto="+$("#txtasunto").val()+"&mensaje="+$("#txtmensaje").val()+"&destino="+$("#sl_destino").val(),
      type : 'POST',
      success : function(r) {
              alert(r);
      },
      error : function(xhr, status) {
          alert('Error intente en otro momento');
      }
    });

    return false;
    }

    function CargaHistorial(){
      $.ajax({
        url : "CorreosEnviados",
        data : "",
        type : 'POST',
        success : function(r) {
            r = "<center><h1>Correos Enviados</h1></center>" + r;
                $("#enviados").html(r);
        },
        error : function(xhr, status) {
            alert('Error intente en otro momento enviados');
        }
      });

      $.ajax({
        url : "CorreosRecibidos",
        data : "",
        type : 'POST',
        success : function(r) {
            r = "<center><h1>Correos Recibidos</h1></center>" + r;
                $("#recibidos").html(r);
        },
        error : function(xhr, status) {
            alert('Error intente en otro momento recibidos');
        }
      });

    }

    function ActualizarPSW(){
      if($("#txtnewpass1").val() == $("#txtnewpass2").val())
      {
        $.ajax({
        url : "ActualizarPSW",
        data : "password="+$("#txtnewpass1").val(),
        type : 'POST',
        success : function(r) {
            alert(r);
        },
        error : function(xhr, status) {
            alert('Error intente en otro momento contraseña');
        }
      });
      } else {
        alert("la contraseña y su confirmación no son iguales");
      }
      return false;
    }

    </script>
  </body>
</html>
